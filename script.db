DROP DATABASE IF EXISTS vacunatorio;

create database vacunatorio;

use vacunatorio;

create table Paciente(
rut varchar(13) not null primary key,
nombre varchar(255) not null,
fecha_nacimiento datetime not null
);

create table Vacuna (
nombre_enfermedad varchar(255) not null primary key,
fecha_registro DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);

create table Recibe (
rut_paciente varchar(255) not null references Paciente(rut),
nombre_enfermedad varchar(255) not null references Vacuna(nombre_enfermedad),
fecha_vacuna DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
primary key (rut_paciente, nombre_enfermedad, fecha_vacuna)
);

insert into Paciente (rut, nombre, fecha_nacimiento) values ('15.396.052-6', 'Juan Perez', '1998-05-02');
insert into Vacuna (nombre_enfermedad, fecha_registro) values('Malaria', default);
insert into Vacuna (nombre_enfermedad, fecha_registro) values('COVID-19', default);
insert into Recibe (rut_paciente, nombre_enfermedad, fecha_vacuna) values ('15.396.052-6', 'COVID-19', default);